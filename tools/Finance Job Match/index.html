<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Finance Resume Parser & Job Match Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #f5f7fa;
      margin: 0; padding: 0;
      display: flex; justify-content: center; min-height: 100vh; color: #25314b;
    }
    .mainbox {
      margin: 40px 0 25px 0;
      padding: 36px 24px 24px 24px;
      background: #fff;
      border-radius: 18px;
      max-width: 570px; width: 99vw;
      box-shadow: 0 10px 40px #b2bedcff;
    }
    h1 {
      font-size: 2em;
      font-weight: 800;
      text-align: center;
      color: #3760d3;
      margin: 0 0 5px 0;
      letter-spacing:.5px;
    }
    .desc {
      text-align: center;
      font-size: 1.07em;
      color: #3f5ca0;
      margin-bottom: 4px;
      font-weight: 600;
    }
    .how {
      text-align: center; font-size: .99em;
      color: #5e7296;
      margin-bottom: 21px;
      font-style: italic;
    }
    #drop-area {
      border: 2px dashed #8eaadb;
      border-radius: 13px;
      background: #f7fafd;
      width: 99%;
      min-height: 70px;
      padding: 16px 0;
      display: flex; align-items: center; justify-content: center;
      color: #44628e;
      margin-bottom: 15px;
      text-align: center;
      font-size: 1.06em;
      cursor: pointer;
      transition: border-color 0.3s, color 0.2s;
      user-select: none;
    }
    #drop-area.highlight { border-color: #3760d3; color: #25314b; background: #f0f5ff;}
    input[type=file] { display: none; }
    textarea {
      width: 97%; max-width: 498px;
      min-height: 95px;
      font-family: inherit;
      font-size: 1.04em;
      margin-bottom: 13px;
      border-radius: 7px;
      border: 1.3px solid #b7c9e9;
      box-sizing: border-box; padding: 8px 7px;
      background: #fcfdff;
      color: #396892;
      outline-color: #3760d3;
    }
    .btn-row { text-align: center; margin: 7px 0 16px 0;}
    button {
      padding: 9px 18px;
      font-size: 1.07em;
      border-radius: 7px;
      border: none;
      background-color: #3760d3;
      color: #fff;
      margin: 5px 11px 7px 0;
      font-weight: 700;
      letter-spacing:.01em;
      cursor: pointer;
      transition: background .14s;
      box-shadow: 0 1px 7px #d5e3f880;
    }
    button:disabled { background: #c7defd; cursor: not-allowed; }
    button:hover:not(:disabled) { background: #244284; }
    .section-title {
      color: #4265b9;
      font-weight: 800;
      font-size: 1.06em;
      margin: 18px 0 3px 0;
      letter-spacing:.04em;
    }
    .infobox {
      background: #f8fafc;
      border-radius: 9px;
      box-shadow: 0 1px 7px #c8d3f488;
      padding: 10px 17px;
      margin-bottom: 13px;
      line-height:1.6;
      font-size:1.07em;
      color:#244284;
    }
    .matchlist {margin: 0 0 16px 0; padding:0; font-size:1em;}
    .matchlist li {margin-bottom:4px;}
    .footer {
      margin-top: 23px;
      text-align: center;
      color: #7081a9;
      font-size: 15px;
    }
    .footer a { color: #2e56a1; text-decoration: underline;}
    .label {font-size:.98em;color:#6675a8;}
    @media (max-width: 600px) {
      .mainbox { padding: 9px 3vw 20px 3vw;}
      textarea { font-size: 0.99em;}
    }
  </style>
</head>
<body>
<div class="mainbox">
  <h1>Finance Resume Parser & Job Matcher</h1>
  <div class="desc">Instantly extract key information from finance résumés and see job matches—no typing or upload required.</div>
  <div class="how">Drag & drop a PDF, DOCX, or paste résumé text below. All parsing is private and in-browser.<br />Review, edit, or copy/dowload structured results for HR or your own career search.</div>
  <div id="drop-area">Drop a resume or <label for="fileElem" style="color:#3760d3;cursor:pointer;">browse</label> <input type="file" id="fileElem" accept=".pdf,.txt,.doc,.docx,text/*" /></div>
  <label class="label">Or paste resume text here:</label>
  <textarea id="resumeInput" placeholder="Paste complete finance resume text here..."></textarea>
  <div class="btn-row">
    <button id="parseBtn" disabled>Extract & Match</button>
    <button id="clearBtn">Clear</button>
  </div>
  <div id="results"></div>
  <div class="footer">
    For more automations visit and follow: <a href="https://effortlessautomation.wordpress.com/" target="_blank">https://effortlessautomation.wordpress.com/</a><br>
    Contact: <a href="mailto:decomplicate001@gmail.com">decomplicate001@gmail.com</a>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
<script>
  const dropArea = document.getElementById('drop-area');
  const fileElem = document.getElementById('fileElem');
  const resumeInput = document.getElementById('resumeInput');
  const parseBtn = document.getElementById('parseBtn');
  const clearBtn = document.getElementById('clearBtn');
  const results = document.getElementById('results');

  // ---- UI Events ----
  dropArea.addEventListener('dragover', e => {e.preventDefault();dropArea.classList.add('highlight');});
  dropArea.addEventListener('dragleave',()=>dropArea.classList.remove('highlight'));
  dropArea.addEventListener('drop', e => {
    e.preventDefault(); dropArea.classList.remove('highlight');
    if (e.dataTransfer.files && e.dataTransfer.files.length) handleFiles(e.dataTransfer.files[0]);
  });
  dropArea.addEventListener('click',()=>fileElem.click());
  fileElem.addEventListener('change',()=>handleFiles(fileElem.files[0]));

  resumeInput.addEventListener('input',()=>parseBtn.disabled=!resumeInput.value.trim());
  parseBtn.addEventListener('click',()=>parseResume(resumeInput.value));
  clearBtn.addEventListener('click',()=>{
    resumeInput.value = ''; parseBtn.disabled = true; results.innerHTML = '';
  });

  // ---- Handle file reading (PDF basic only) ----
  async function handleFiles(file) {
    results.innerHTML = '';
    if (file.type === "application/pdf") {
      results.innerHTML = '<div class="infobox">Extracting text from PDF, please wait...</div>';
      const pdf = await pdfjsLib.getDocument(await file.arrayBuffer()).promise;
      let text = '';
      for (let i=1;i<=pdf.numPages;i++){
        const pg = await pdf.getPage(i);
        const content = await pg.getTextContent();
        text += content.items.map(item=>item.str).join(' ')+'\n';
      }
      resumeInput.value = text.trim();
    } else {
      const reader = new FileReader();
      reader.onload = e => resumeInput.value = e.target.result;
      reader.readAsText(file);
    }
    parseBtn.disabled = false;
  }

  // ---- Parsing & Job Matching Heuristics ----
  const FINANCE_JOBS = [
    "Accountant","Financial Analyst","Investment Banker","Finance Manager","Controller",
    "Financial Planner","Credit Analyst","Risk Analyst","Treasury Analyst","Audit Associate",
    "Tax Consultant","Corporate Finance Associate","Accounts Payable/Receivable","FP&A Analyst",
    "Compliance Officer","Equity Research Analyst","Portfolio Manager","Wealth Advisor",
    "Loan Officer","Quantitative Analyst","Budget Analyst","Finance Project Manager"
  ];
  const SKILLS = [
    "accounting","excel","erp","audit","financial modeling","valuation","tax",
    "ledger","GAAP","IFRS","SAP","QuickBooks","reconciliation","forecasting",
    "reporting","compliance","payroll","budgeting","analysis","cash flow",
    "investment","banking","mergers","due diligence","risk management"
  ];
  const CERTS = [
    "CA","CPA","CMA","CFA","ACCA","MBA","FRM","CISA","CFE"
  ];
  function parseResume(text) {
    results.innerHTML = '';
    let obj = { name:'', email:'', phone:'', skills:[], jobs:[], certs:[], experience:'', summary:'' };
    // Name: first non-empty line, unless it has "Email" or "Phone" or @
    let lines = text.split('\n').map(l=>l.trim()).filter(l=>l);
    obj.name = (lines.find(l=>l && !/email|phone|@/i.test(l))||'').replace(/\d+/g,'').trim().split(' ').slice(0,4).join(' ');

    // Email
    let m = text.match(/[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/);
    obj.email = m ? m[0] : '';
    // Phone
    m = text.match(/(\+?\d[\d .-]{9,15}\d)/);
    obj.phone = m ? m[0] : '';
    // Skills
    let ltext = text.toLowerCase();
    obj.skills = SKILLS.filter(s=>ltext.includes(s)).map(capitalize);
    // Experience (years)
    m = text.match(/(\d+)[ ]*(?:\+|plus)?[ ]*(?:years|yrs)[ ]+(?:experience|exp)/i);
    if (!m) m = text.match(/experience(?:\:|\s)(\d{1,2})/i);
    obj.experience = m ? m[1] + " years" : '';
    // Certifications
    obj.certs = CERTS.filter(c => new RegExp(`\\b${c}\\b`).test(text.toUpperCase()));
    // Job Roles
    obj.jobs = FINANCE_JOBS.filter(j => new RegExp(j,"i").test(text));
    // Summary - first big paragraph or "Summary" section
    let idx = ltext.indexOf('summary');
    if (idx!==-1) {
      let chunk = text.slice(idx,idx+400).split('\n').slice(1,5).join(' ');
      obj.summary = chunk.replace(/[^a-zA-Z0-9.,\-\' ]/g,'').trim().slice(0,250);
    }
    // If not, use top lines
    if (!obj.summary) obj.summary = lines.slice(0,8).join(' ').replace(/[^a-zA-Z0-9.,\-\' ]/g,'').trim().slice(0,200);

    let matches = jobMatches(obj);

    // Display output
    results.innerHTML = `
      <div class="section-title">Extracted Profile Info</div>
      <div class="infobox">
        <b>Name:</b> ${obj.name||'-'}<br>
        <b>Email:</b> ${obj.email||'-'}<br>
        <b>Phone:</b> ${obj.phone||'-'}<br>
        <b>Certifications:</b> ${obj.certs.join(', ')||'-'}<br>
        <b>Skills:</b> ${obj.skills.join(', ')||'-'}<br>
        <b>Years Experience:</b> ${obj.experience||'-'}<br>
        <b>Summary:</b> <span style="color:#73739a;">${obj.summary||'-'}</span>
      </div>
      <div class="section-title">Finance Job Role Matches</div>
      <ul class="matchlist">${matches.map(m=>`<li>• <b>${m}</b></li>`).join('')}</ul>
      <div style="margin:7px 0 0 0;text-align:center;">
        <button onclick="copyStructuredData()">Copy Extracted Data</button>
      </div>
    `;
    window.lastExtractedData = obj;
  }

  function jobMatches(obj){
    // Match: if role/skill/cert detected in resume.
    let arr = [];
    for (const job of FINANCE_JOBS) {
      if ((obj.jobs||[]).some(j=>j===job)) {arr.push(job); continue;}
      if ((obj.skills||[]).some(s => job.toLowerCase().includes(s.toLowerCase()))) {arr.push(job);}
      if ((obj.certs||[]).length && ['Accountant','Audit Associate','Tax Consultant','Finance Manager','FP&A Analyst'].includes(job)) arr.push(job);
    }
    if (!arr.length && (obj.skills||[]).length>0) arr.push('Finance / Accounts Executive');
    return Array.from(new Set(arr));
  }
  function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1);}
  window.copyStructuredData = function() {
    const d = window.lastExtractedData;
    if (!d) return;
    const txt =
      `Name: ${d.name}\nEmail: ${d.email}\nPhone: ${d.phone}\nCertifications: ${d.certs.join(', ')}\nSkills: ${d.skills.join(', ')}\nYears Experience: ${d.experience}\nSummary: ${d.summary}`;
    navigator.clipboard.writeText(txt).then(()=>alert('Extracted data copied!'));
  };
</script>
</body>
</html>
